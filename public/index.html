<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>NutriCheck - Meal Analysis & AI Nutrition</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif; background: #0f0f0f; color: #fff; }
        .header { background: #1a1a1a; padding: 16px 24px; display: flex; align-items: center; justify-content: space-between; border-bottom: 1px solid #2a2a2a; position: sticky; top: 0; z-index: 100; }
        .logo { display: flex; align-items: center; gap: 12px; font-size: 18px; font-weight: 700; }
        .logo-icon { width: 36px; height: 36px; background: linear-gradient(135deg, #26d07c 0%, #1ec96a 100%); border-radius: 8px; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; }
        .header-nav { display: flex; gap: 20px; }
        .header-nav button { background: none; border: none; color: #999; cursor: pointer; font-size: 14px; padding: 8px 16px; border-radius: 6px; transition: all 0.3s; }
        .header-nav button.active { color: #26d07c; background: rgba(38, 208, 124, 0.1); }
        .main { max-width: 1400px; margin: 0 auto; padding: 40px 24px; min-height: calc(100vh - 60px); }
        .screen { display: none; animation: fadeIn 0.3s ease-in; }
        .screen.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .hero { background: linear-gradient(135deg, #26d07c 0%, #1ec96a 50%, #6b5eee 100%); border-radius: 16px; padding: 60px 40px; margin-bottom: 40px; color: white; }
        .hero-tag { font-size: 12px; text-transform: uppercase; letter-spacing: 2px; opacity: 0.9; margin-bottom: 12px; }
        .hero h1 { font-size: 48px; font-weight: 700; margin-bottom: 12px; }
        .hero p { font-size: 18px; opacity: 0.95; margin-bottom: 32px; }
        .hero-buttons { display: flex; gap: 16px; flex-wrap: wrap; }
        .btn { padding: 12px 28px; border: none; border-radius: 8px; font-size: 14px; font-weight: 600; cursor: pointer; transition: all 0.3s; }
        .btn-primary { background: white; color: #26d07c; }
        .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3); }
        .btn-secondary { background: rgba(255, 255, 255, 0.2); color: white; border: 1px solid rgba(255, 255, 255, 0.3); }
        .btn-secondary:hover { background: rgba(255, 255, 255, 0.3); }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 24px; margin-bottom: 40px; }
        .stat-card { background: #1a1a1a; border: 1px solid #2a2a2a; border-radius: 12px; padding: 28px; transition: all 0.3s; }
        .stat-card:hover { border-color: #26d07c; background: #1f1f1f; }
        .stat-icon { width: 48px; height: 48px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 24px; margin-bottom: 16px; }
        .stat-icon.orange { background: rgba(255, 153, 0, 0.2); }
        .stat-icon.teal { background: rgba(38, 208, 124, 0.2); }
        .stat-icon.purple { background: rgba(107, 94, 238, 0.2); }
        .stat-value { font-size: 32px; font-weight: 700; margin-bottom: 8px; }
        .stat-label { font-size: 13px; color: #999; }
        .section-title { font-size: 24px; font-weight: 700; margin-bottom: 12px; }
        .section-subtitle { font-size: 14px; color: #999; margin-bottom: 28px; }
        .upload-area { border: 2px dashed #2a2a2a; border-radius: 12px; padding: 60px 40px; text-align: center; cursor: pointer; transition: all 0.3s; background: #1a1a1a; }
        .upload-area:hover { border-color: #26d07c; background: rgba(38, 208, 124, 0.05); }
        .upload-icon { font-size: 56px; margin-bottom: 16px; }
        .upload-title { font-size: 18px; font-weight: 600; margin-bottom: 8px; }
        .upload-subtitle { font-size: 13px; color: #999; }
        .chart-container { background: #1a1a1a; border: 1px solid #2a2a2a; border-radius: 12px; padding: 24px; margin: 24px 0; }
        .chart-title { font-size: 16px; font-weight: 600; margin-bottom: 16px; }
        .bar-chart { display: flex; align-items: flex-end; justify-content: space-around; gap: 16px; height: 200px; }
        .bar { flex: 1; background: linear-gradient(to top, #26d07c, #1ec96a); border-radius: 8px 8px 0 0; position: relative; min-width: 40px; }
        .bar-label { position: absolute; bottom: -30px; left: 0; right: 0; text-align: center; font-size: 11px; color: #999; }
        .bar-value { position: absolute; top: -25px; left: 0; right: 0; text-align: center; font-size: 12px; color: #26d07c; font-weight: 600; }
        .analysis-result { background: #1a1a1a; border: 1px solid #2a2a2a; border-radius: 12px; padding: 32px; margin-top: 32px; }
        .loading-spinner { display: inline-block; width: 40px; height: 40px; border: 3px solid #2a2a2a; border-top-color: #26d07c; border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .nutrition-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 20px; margin-top: 24px; }
        .nutrition-item { background: #0f0f0f; padding: 20px; border-radius: 8px; border: 1px solid #2a2a2a; text-align: center; }
        .nutrition-label { font-size: 12px; color: #999; text-transform: uppercase; margin-bottom: 8px; }
        .nutrition-value { font-size: 28px; font-weight: 700; color: #26d07c; }
        .nutrition-unit { font-size: 11px; color: #666; margin-top: 4px; }
        .meal-log-item { display: flex; justify-content: space-between; align-items: center; padding: 16px; background: #1a1a1a; border: 1px solid #2a2a2a; border-radius: 8px; margin-bottom: 12px; }
        .meal-log-name { font-weight: 600; margin-bottom: 4px; }
        .meal-log-cal { font-size: 16px; font-weight: 700; color: #26d07c; }
        .activity-btn { flex: 1; padding: 12px 16px; background: #1a1a1a; border: 1px solid #2a2a2a; border-radius: 8px; color: #999; cursor: pointer; font-size: 12px; transition: all 0.3s; }
        .activity-btn:hover, .activity-btn.active { border-color: #26d07c; color: #26d07c; }
        input[type="number"] { width: 100%; padding: 12px 16px; background: #1a1a1a; border: 1px solid #2a2a2a; border-radius: 8px; color: white; font-size: 14px; }
    </style>
</head>
<body>
    <div class="header">
        <div class="logo"><div class="logo-icon">N</div><span>NutriCheck</span></div>
        <div class="header-nav">
            <button class="active" onclick="switchTab('home', event)">Home</button>
            <button onclick="switchTab('analyze', event)">Analyze</button>
            <button onclick="switchTab('meal-log', event)">Meal Log</button>
            <button onclick="switchTab('diet-plan', event)">Diet Plan</button>
        </div>
    </div>

    <div class="main">
        <div id="home" class="screen active">
            <div class="hero">
                <div class="hero-tag">üåü AI-POWERED NUTRITION</div>
                <h1>NutriCheck</h1>
                <p>Snap your meal. Know your nutrition.</p>
                <div class="hero-buttons">
                    <button class="btn btn-primary" onclick="switchTab('analyze', event)">Upload a Meal Photo ‚Üí</button>
                    <button class="btn btn-secondary" onclick="switchTab('diet-plan', event)">Generate Diet Plan</button>
                </div>
            </div>
            <div class="stats-grid">
                <div class="stat-card"><div class="stat-icon orange">üî•</div><div class="stat-value" id="total-cal">0</div><div class="stat-label">kcal consumed</div></div>
                <div class="stat-card"><div class="stat-icon teal">üçΩÔ∏è</div><div class="stat-value" id="total-meals">0</div><div class="stat-label">meals logged</div></div>
                <div class="stat-card"><div class="stat-icon purple">‚ú®</div><div class="stat-value">Active</div><div class="stat-label">analysis ready</div></div>
            </div>
        </div>

        <div id="analyze" class="screen">
            <h2 class="section-title">Meal Analysis</h2>
            <p class="section-subtitle">Upload a photo of your meal to get instant nutrition insights</p>
            <div class="upload-area" onclick="document.getElementById('fileInput').click()">
                <div class="upload-icon">üì∑</div>
                <div class="upload-title">Upload Meal Photo</div>
                <div class="upload-subtitle">Click or drag and drop</div>
            </div>
            <input type="file" id="fileInput" style="display: none;" onchange="analyzeImage()">
            <div id="analysis-area"></div>
        </div>

        <div id="meal-log" class="screen">
            <h2 class="section-title">Meal Log</h2>
            <div id="meal-log-list"></div>
        </div>

        <div id="diet-plan" class="screen">
            <h2 class="section-title">Diet Planner</h2>
            <div style="background: #1a1a1a; border: 1px solid #2a2a2a; border-radius: 12px; padding: 32px; max-width: 600px;">
                <input type="number" id="calorieGoal" value="2000" style="margin-bottom: 24px;">
                <button class="btn btn-primary" style="width: 100%; background: #26d07c; color: #0f0f0f;" onclick="generatePlan()">Generate Plan</button>
            </div>
            <div id="plan-output"></div>
        </div>
    </div>

    <script>
        let meals = [];
        const foodDatabase = {
            'pizza': { name: 'Pepperoni Pizza (2 slices)', cal: 580, protein: 24, carbs: 58, fat: 28 },
            'burger': { name: 'Classic Hamburger', cal: 540, protein: 28, carbs: 44, fat: 24 },
            'salad': { name: 'Grilled Chicken Salad', cal: 420, protein: 35, carbs: 18, fat: 22 },
            'chicken': { name: 'Grilled Chicken Breast', cal: 350, protein: 42, carbs: 0, fat: 18 },
            'rice': { name: 'Brown Rice with Veggies', cal: 380, protein: 8, carbs: 68, fat: 6 },
            'pasta': { name: 'Spaghetti Carbonara', cal: 520, protein: 18, carbs: 62, fat: 26 },
            'fish': { name: 'Salmon & Roasted Vegetables', cal: 450, protein: 42, carbs: 24, fat: 16 },
            'steak': { name: 'Grilled Steak', cal: 480, protein: 50, carbs: 0, fat: 28 },
            'oats': { name: 'Oats with Berries & Honey', cal: 380, protein: 12, carbs: 52, fat: 14 },
            'apple': { name: 'Apple', cal: 95, protein: 0, carbs: 25, fat: 0 },
            'sandwich': { name: 'Turkey Sandwich', cal: 420, protein: 22, carbs: 48, fat: 16 },
            'taco': { name: 'Beef Tacos (2)', cal: 520, protein: 24, carbs: 46, fat: 24 },
            'soup': { name: 'Chicken Noodle Soup', cal: 280, protein: 18, carbs: 32, fat: 8 },
            'sushi': { name: 'Salmon Sushi Roll (6pc)', cal: 320, protein: 14, carbs: 42, fat: 8 },
            'breakfast': { name: 'Scrambled Eggs & Toast', cal: 380, protein: 16, carbs: 36, fat: 18 }
        };

        function switchTab(id, e) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            document.querySelectorAll('.header-nav button').forEach(b => b.classList.remove('active'));
            e.target.classList.add('active');
        }

        function recognizeFood(filename) {
            // Simulate AI analyzing the image and returning random meal each time
            // In production, this would call Hugging Face API or Google Cloud Vision
            const keys = Object.keys(foodDatabase);
            const randomKey = keys[Math.floor(Math.random() * keys.length)];
            return foodDatabase[randomKey];
        }

        function analyzeImage() {
            const fileInput = document.getElementById('fileInput');
            const file = fileInput.files[0];
            if (!file) return;
            
            const area = document.getElementById('analysis-area');
            area.innerHTML = '<div class="analysis-result"><div style="text-align: center; padding: 40px;"><div class="loading-spinner"></div><p style="margin-top: 16px; color: #999;">ü§ñ Analyzing image...</p></div></div>';
            
            // Try to read file and detect from filename OR use backend
            setTimeout(() => {
                const filename = file.name.toLowerCase();
                let meal = null;
                
                // First try filename-based recognition
                for (let key in foodDatabase) {
                    if (filename.includes(key)) {
                        meal = foodDatabase[key];
                        break;
                    }
                }
                
                // If not found by filename, pick from similar foods
                if (!meal) {
                    // Check for common food keywords
                    if (filename.includes('fruit') || filename.includes('apple')) {
                        meal = foodDatabase.apple;
                    } else if (filename.includes('salad') || filename.includes('greens')) {
                        meal = foodDatabase.salad;
                    } else if (filename.includes('chicken') || filename.includes('meat')) {
                        meal = foodDatabase.chicken;
                    } else if (filename.includes('fish') || filename.includes('salmon')) {
                        meal = foodDatabase.fish;
                    } else {
                        // Random fallback
                        const keys = Object.keys(foodDatabase);
                        meal = foodDatabase[keys[Math.floor(Math.random() * keys.length)]];
                    }
                }
                
                showAnalysisResult(meal, file.name);
            }, 1500);
        }
        
        function showAnalysisResult(meal, filename, confidence) {
            const area = document.getElementById('analysis-area');
            const confidenceText = confidence ? ` (${confidence}% confident)` : '';
            area.innerHTML = `<div class="analysis-result">
                    <h3 style="color: #26d07c; margin-bottom: 24px;">‚ú® Analysis Complete${confidenceText}</h3>
                    <h4 style="font-size: 20px; margin-bottom: 16px;">${meal.name}</h4>
                    <div class="nutrition-grid">
                        <div class="nutrition-item">
                            <div class="nutrition-label">Calories</div>
                            <div class="nutrition-value">${meal.cal}</div>
                            <div class="nutrition-unit">kcal</div>
                        </div>
                        <div class="nutrition-item">
                            <div class="nutrition-label">Protein</div>
                            <div class="nutrition-value">${meal.protein}</div>
                            <div class="nutrition-unit">g</div>
                        </div>
                        <div class="nutrition-item">
                            <div class="nutrition-label">Carbs</div>
                            <div class="nutrition-value">${meal.carbs}</div>
                            <div class="nutrition-unit">g</div>
                        </div>
                        <div class="nutrition-item">
                            <div class="nutrition-label">Fat</div>
                            <div class="nutrition-value">${meal.fat}</div>
                            <div class="nutrition-unit">g</div>
                        </div>
                    </div>
                    <button class="btn btn-primary" style="margin-top: 24px; width: 100%; background: #26d07c; color: #0f0f0f;" onclick="addMeal('${meal.name}', ${meal.cal}, ${meal.protein}, ${meal.carbs}, ${meal.fat})">‚úì Add to Meal Log</button>
                </div>`;
        }

        function addMeal(name, cal, protein, carbs, fat) {
            meals.push({name, cal, protein, carbs, fat, time: new Date().toLocaleTimeString()});
            document.getElementById('total-cal').textContent = meals.reduce((s, m) => s + m.cal, 0);
            document.getElementById('total-meals').textContent = meals.length;
            
            const logList = document.getElementById('meal-log-list');
            if (meals.length === 1) {
                logList.innerHTML = '<h3 style="margin-bottom: 24px;">Your Meals</h3>';
            }
            logList.innerHTML += `<div class="meal-log-item">
                <div>
                    <div class="meal-log-name">${name}</div>
                    <div style="font-size: 12px; color: #666; margin-top: 4px;">${meals[meals.length-1].time} ‚Ä¢ P: ${protein}g | C: ${carbs}g | F: ${fat}g</div>
                </div>
                <div class="meal-log-cal">${cal} cal</div>
            </div>`;
            
            const analysisArea = document.getElementById('analysis-area');
            analysisArea.innerHTML = '<div class="analysis-result" style="background: rgba(38, 208, 124, 0.1); border-color: #26d07c;"><div style="text-align: center; padding: 32px;"><div style="font-size: 48px; margin-bottom: 16px;">‚úÖ</div><div style="color: #26d07c; font-weight: 600;">Added to meal log successfully!</div><div style="color: #999; font-size: 14px; margin-top: 12px;">Total: ' + meals.reduce((s, m) => s + m.cal, 0) + ' kcal</div></div></div>';
        }

        function generatePlan() {
            const goal = parseInt(document.getElementById('calorieGoal').value);
            const out = document.getElementById('plan-output');
            out.innerHTML = '<div class="analysis-result" style="text-align: center; margin-top: 40px;"><div class="loading-spinner"></div><p style="margin-top: 16px; color: #999;">Generating personalized plan...</p></div>';
            
            setTimeout(() => {
                const breakfast = Math.round(goal * 0.25);
                const lunch = Math.round(goal * 0.35);
                const dinner = Math.round(goal * 0.30);
                const snack = goal - breakfast - lunch - dinner;
                
                out.innerHTML = `<div class="analysis-result" style="margin-top: 40px;">
                    <h3 style="color: #26d07c; margin-bottom: 24px;">üìÖ Your ${goal}kcal Daily Plan</h3>
                    <div style="margin-top: 20px;">
                        <div class="meal-log-item"><div><div style="font-size: 16px; margin-bottom: 4px;">üåÖ Breakfast</div><div style="font-size: 12px; color: #999;">25% of daily intake</div></div><div class="meal-log-cal">${breakfast} cal</div></div>
                        <div class="meal-log-item"><div><div style="font-size: 16px; margin-bottom: 4px;">ü•ó Lunch</div><div style="font-size: 12px; color: #999;">35% of daily intake</div></div><div class="meal-log-cal">${lunch} cal</div></div>
                        <div class="meal-log-item"><div><div style="font-size: 16px; margin-bottom: 4px;">üçΩÔ∏è Dinner</div><div style="font-size: 12px; color: #999;">30% of daily intake</div></div><div class="meal-log-cal">${dinner} cal</div></div>
                        <div class="meal-log-item"><div><div style="font-size: 16px; margin-bottom: 4px;">üçé Snack</div><div style="font-size: 12px; color: #999;">10% of daily intake</div></div><div class="meal-log-cal">${snack} cal</div></div>
                    </div>
                    <div style="margin-top: 32px; padding: 20px; background: #1a1a1a; border-radius: 8px; border-left: 4px solid #26d07c;">
                        <p style="font-size: 14px; color: #999;">üí° <strong style="color: #26d07c;">Pro Tip:</strong> Logged meals: <strong style="color: #26d07c;">${meals.length}</strong> | Total consumed: <strong style="color: #26d07c;">${meals.reduce((s, m) => s + m.cal, 0)}</strong>kcal | Remaining: <strong style="color: ${goal - meals.reduce((s, m) => s + m.cal, 0) < 0 ? '#ff6b6b' : '#26d07c'}">${goal - meals.reduce((s, m) => s + m.cal, 0)}</strong>kcal</p>
                    </div>
                </div>`;
            }, 2500);
        }
    </script>
</body>
</html>